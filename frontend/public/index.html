<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Campus Clubs & Events Portal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <div class="page-shell">
  <header class="page-hero">
    <div>
      <p class="eyebrow">Campus Life</p>
      <h1>Campus Clubs & Events</h1>
      <p class="lead">Discover events, find your people, and keep campus life organized.</p>
    </div>
    <div id="top_bar" class="top-bar hidden">
      <div id="user_summary" class="user-summary"></div>
      <a href="#" id="sign_out_link" class="switch-user" onclick="signOut(event)">Sign out</a>
    </div>
  </header>

  <section id="login_section">
    <h2>Sign up or Log In</h2>
    <p>Create your account to explore events, clubs, and admin tools tailored to your role.</p>
    <div class="auth-card">
      <div class="auth-tabs" role="tablist">
        <button type="button" class="auth-tab active" data-target="signup" onclick="showAuthTab('signup')">Sign Up</button>
        <button type="button" class="auth-tab" data-target="login" onclick="showAuthTab('login')">Log In</button>
      </div>
      <div id="signup_panel" class="auth-panel" role="tabpanel">
        <label>Username <input id="signup_username" placeholder="jordan" autocomplete="username"></label>
        <label>Email <input id="signup_email" placeholder="student@example.edu" autocomplete="email"></label>
        <label>Password <input id="signup_password" type="password" autocomplete="new-password"></label>
        <label>Role
          <select id="signup_role">
            <option value="student">Student</option>
            <option value="leader">Club Leader</option>
          </select>
        </label>
        <button type="button" onclick="handleSignup(event)">Create Account</button>
        <div id="signup_status" class="section-status status" aria-live="polite"></div>
      </div>
      <div id="login_panel" class="auth-panel hidden" role="tabpanel">
        <label>Username or Email <input id="login_identifier" placeholder="jordan or student@example.edu" autocomplete="username"></label>
        <label>Password <input id="login_password" type="password" autocomplete="current-password"></label>
        <button type="button" onclick="handleLogin(event)">Log In</button>
        <div id="login_status" class="section-status status" aria-live="polite"></div>
      </div>
    </div>
  </section>

  <div id="app_shell" class="hidden">

  <nav class="nav-bar">
    <button type="button" class="nav-button" id="nav-events" data-target="events" onclick="showNavSection('events')">Events</button>
    <button type="button" class="nav-button" id="nav-clubs" data-target="clubs" onclick="showNavSection('clubs')">Clubs</button>
    <button type="button" class="nav-button" id="nav-mystuff" data-target="mystuff" onclick="showNavSection('mystuff')">My Stuff</button>
    <button type="button" class="nav-button admin-only" id="nav-admin" data-target="admin" onclick="showNavSection('admin')">Admin</button>
  </nav>

  <div id="role_notice" class="role-notice hidden" role="status" aria-live="polite"></div>

  <section data-section-group="events" class="content-section">
    <div class="section-header">
      <p class="eyebrow">Events</p>
      <div>
        <h2>Discover Events</h2>
        <div id="events_status" class="section-status status" aria-live="polite"></div>
        <p>Search for something to attend, or add something new to the calendar.</p>
      </div>
    </div>
    <div id="events_search_section" class="panel filter-panel events-section">
      <div class="section-header compact">
        <div>
          <p class="eyebrow">Find Events</p>
          <h3>Search & Filter</h3>
          <p class="hint">Dial in the dates, categories, and locations to find the right fit.</p>
        </div>
        <button type="button" class="btn-ghost" onclick="loadTrending()">Trending</button>
      </div>
      <div class="filter-grid">
        <div class="filter-cluster">
          <p class="cluster-label">Dates</p>
          <div class="datetime-filter">
            <p class="hint">Starts after</p>
            <div class="datetime-group">
              <label>Date <input type="date" id="filter_start_date"></label>
              <div class="time-fields">
                <label>Hour <input type="number" id="filter_start_hour" min="1" max="12" placeholder="HH"></label>
                <span class="time-separator">:</span>
                <label>Minute <input type="number" id="filter_start_minute" min="0" max="59" placeholder="MM"></label>
                <label class="ampm-select">AM/PM
                  <select id="filter_start_ampm">
                    <option value="">--</option>
                    <option value="AM">AM</option>
                    <option value="PM">PM</option>
                  </select>
                </label>
              </div>
            </div>
          </div>
          <div class="datetime-filter">
            <p class="hint">Ends before</p>
            <div class="datetime-group">
              <label>Date <input type="date" id="filter_end_date"></label>
              <div class="time-fields">
                <label>Hour <input type="number" id="filter_end_hour" min="1" max="12" placeholder="HH"></label>
                <span class="time-separator">:</span>
                <label>Minute <input type="number" id="filter_end_minute" min="0" max="59" placeholder="MM"></label>
                <label class="ampm-select">AM/PM
                  <select id="filter_end_ampm">
                    <option value="">--</option>
                    <option value="AM">AM</option>
                    <option value="PM">PM</option>
                  </select>
                </label>
              </div>
            </div>
          </div>
        </div>
        <div class="filter-cluster">
          <p class="cluster-label">Details</p>
          <label>Category
            <select id="filter_category">
              <option value="">Any Category</option>
              <option value="music">Music</option>
              <option value="tech">Tech</option>
              <option value="sports">Sports</option>
              <option value="social">Social</option>
              <option value="career">Career</option>
              <option value="other">Other</option>
            </select>
          </label>
          <label>Title contains <input id="filter_title" placeholder="Workshop, social, meetup"></label>
          <label>Location contains <input id="filter_location" placeholder="Student Union, ENG, etc."></label>
        </div>
        <div class="filter-cluster">
          <p class="cluster-label">Preferences</p>
          <label class="checkbox-inline"><input type="checkbox" id="filter_free"> Free events only</label>
          <label>Sort by
            <select id="filter_sort">
              <option value="date">Date</option>
              <option value="popularity">Popularity</option>
            </select>
          </label>
        </div>
      </div>
      <div class="button-row">
        <button type="button" class="btn-primary" onclick="loadEvents()">Search</button>
        <button type="button" class="btn-secondary" onclick="resetFilters()">Reset Filters</button>
        <button type="button" class="btn-ghost" onclick="loadTrending()">See Trending</button>
      </div>
    </div>
    <div id="events_results_section" class="panel table-panel events-section">
      <div class="section-header compact">
        <div>
          <p class="eyebrow">Results</p>
          <h3>Upcoming Events</h3>
        </div>
        <button type="button" class="btn-secondary" onclick="loadEvents()">Refresh</button>
      </div>
      <div id="events_list" class="event-list" aria-live="polite"></div>
    </div>
    <div id="events_create_section" class="panel events-section">
      <h3>Create an Event</h3>
      <p class="hint">Share a meetup, workshop, or social and put it on the radar.</p>
      <label>Title <input id="event_title" placeholder="Workshop title"></label>
      <div class="datetime-field">
        <span class="datetime-title">Starts At</span>
        <div class="datetime-group">
          <label>Date <input type="date" id="event_start_date"></label>
          <div class="time-fields">
            <label class="sr-only" for="event_start_hour">Hour</label>
            <input type="number" id="event_start_hour" min="1" max="12" placeholder="HH">
            <span class="time-separator">:</span>
            <label class="sr-only" for="event_start_minute">Minute</label>
            <input type="number" id="event_start_minute" min="0" max="59" placeholder="MM">
            <label class="sr-only" for="event_start_ampm">AM or PM</label>
            <select id="event_start_ampm">
              <option value="">AM/PM</option>
              <option value="AM">AM</option>
              <option value="PM">PM</option>
            </select>
          </div>
        </div>
      </div>
      <label>Location <input id="event_location" placeholder="Student Union"></label>
      <label>Capacity <input type="number" id="event_capacity" placeholder="25"></label>
      <label>Price (cents) <input type="number" id="event_price" placeholder="0"></label>
      <label>Category <input id="event_category" placeholder="tech, music, etc."></label>
      <label>Club ID (optional) <input type="number" id="event_club" placeholder="123"></label>
      <div class="button-row">
        <button onclick="createEvent()">Create Event</button>
      </div>
    </div>
    <div class="panel events-section">
      <div class="section-header compact">
        <div>
          <p class="eyebrow">Now Popular</p>
          <h3>Trending Events</h3>
        </div>
        <button type="button" onclick="loadTrending()">Refresh Trending</button>
      </div>
      <ul id="trending_list" class="card-list compact-list"></ul>
    </div>
  </section>

  <section data-section-group="clubs" class="content-section">
    <div class="section-header">
      <p class="eyebrow">Clubs</p>
      <div>
        <h2>Clubs Directory</h2>
        <div id="clubs_status" class="section-status status" aria-live="polite"></div>
        <p>Browse campus clubs, join a club, or manage your own.</p>
      </div>
    </div>
    <div class="row card-grid">
      <div class="panel">
        <div class="section-header compact">
          <div>
            <h3>Clubs Directory</h3>
            <p class="hint">Join or leave clubs straight from the list.</p>
          </div>
          <div class="toolbar">
            <label class="search-field">
              <span class="sr-only">Search clubs</span>
              <input id="club_search" type="search" placeholder="Search clubs" oninput="filterClubList()" aria-label="Search clubs">
            </label>
            <button onclick="loadClubs()">Refresh Clubs</button>
          </div>
        </div>
        <ul id="club_list" class="card-list"></ul>
      </div>
      <div class="panel">
        <h3>Start or Join a Club</h3>
        <p class="hint">Create something new or request membership.</p>
        <label>Name <input id="club_name" placeholder="Board Games"></label>
        <label>Description <textarea id="club_desc" placeholder="What does this club do?"></textarea></label>
        <button id="club_submit_btn" onclick="createClub()">Submit Club (Pending Approval)</button>
        <div id="club_create_result" class="section-status status" aria-live="polite"></div>
        <h4>Join a Club</h4>
        <label>Club ID <input type="number" id="join_club_id"></label>
        <button onclick="joinClub()">Request to Join</button>
        <div id="club_join_result" class="section-status status" aria-live="polite"></div>
      </div>
    </div>

    <div class="panel">
      <div class="section-header compact">
        <div>
          <h3>Club Details</h3>
          <p class="hint">Inspect a specific club and use leader tools when available.</p>
        </div>
        <div class="button-row inline">
          <label>Club ID <input type="number" id="club_detail_id" placeholder="Club ID"></label>
          <button onclick="loadClubDetail()">Load Club</button>
        </div>
      </div>
      <div id="club_detail_status" class="section-status status" aria-live="polite"></div>
      <div id="club_detail" class="club-detail"></div>

      <div id="leader_dashboard" class="leader-dashboard leader-only hidden">
        <div class="section-header compact">
          <div>
            <p class="eyebrow">Leader Dashboard</p>
            <h3>Manage Events, Members, and Updates</h3>
            <p class="hint">Create club events, approve membership requests, and share announcements.</p>
          </div>
        </div>
        <div class="leader-dashboard__grid">
          <div class="panel leader-card">
            <p class="eyebrow">Create Event</p>
            <h4>Schedule Club Event</h4>
            <p class="hint">Share dates, locations, and capacity for upcoming meetups.</p>
            <div class="form-grid">
              <label>Title <input id="club_event_title" placeholder="Workshop title"></label>
              <div class="datetime-field">
                <span class="datetime-title">Starts At</span>
                <div class="datetime-group">
                  <label>Date <input type="date" id="club_event_start_date"></label>
                  <div class="time-fields">
                    <label class="sr-only" for="club_event_start_hour">Hour</label>
                    <input type="number" id="club_event_start_hour" min="1" max="12" placeholder="HH">
                    <span class="time-separator">:</span>
                    <label class="sr-only" for="club_event_start_minute">Minute</label>
                    <input type="number" id="club_event_start_minute" min="0" max="59" placeholder="MM">
                    <label class="sr-only" for="club_event_start_ampm">AM or PM</label>
                    <select id="club_event_start_ampm">
                      <option value="">AM/PM</option>
                      <option value="AM">AM</option>
                      <option value="PM">PM</option>
                    </select>
                  </div>
                </div>
              </div>
              <label>Location <input id="club_event_location" placeholder="Event location"></label>
              <label>Capacity <input type="number" id="club_event_capacity" placeholder="25"></label>
              <label>Price (cents) <input type="number" id="club_event_price" placeholder="0"></label>
              <label>Category <input id="club_event_category" placeholder="community"></label>
            </div>
            <div class="button-row aligned">
              <button onclick="createClubEvent()">Create Event</button>
            </div>
          </div>

          <div class="panel leader-card">
            <p class="eyebrow">Pending Members</p>
            <h4>Approve Requests</h4>
            <p class="hint">Review pending join requests for this club.</p>
            <div class="form-grid">
              <label>Approve Member Email <input id="approve_email" placeholder="student@example.edu"></label>
            </div>
            <div class="button-row aligned">
              <button onclick="approveMember()">Approve</button>
            </div>
            <ul id="pending_members_list" class="stacked-list slim-list"><li class="hint">Load a club to view pending members.</li></ul>
          </div>

          <div class="panel leader-card">
            <p class="eyebrow">Post Announcement</p>
            <h4>Share Updates</h4>
            <p class="hint">Let members know about schedule changes or club news.</p>
            <div class="form-grid">
              <label>Title <input id="ann_title"></label>
              <label>Body <textarea id="ann_body"></textarea></label>
            </div>
            <div class="button-row aligned">
              <button onclick="postAnnouncement()">Post Announcement</button>
            </div>
            <ul id="leader_announcements_list" class="stacked-list slim-list"><li class="hint">Announcements will appear here.</li></ul>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section data-section-group="mystuff" class="content-section">
    <div class="section-header">
      <p class="eyebrow">My Stuff</p>
      <div>
        <h2>Your Hub</h2>
        <p>Quickly jump to your registered events and club memberships.</p>
      </div>
    </div>
    <div class="row card-grid">
      <div class="panel">
        <div class="section-header compact">
          <div>
            <h3>My Events</h3>
            <p class="hint">See everything you have signed up for.</p>
          </div>
          <button onclick="loadMyEvents()">Load My Events</button>
        </div>
        <div class="table-wrapper">
          <table>
            <thead>
              <tr><th>Title</th><th>When</th><th>Location</th><th>Category</th></tr>
            </thead>
            <tbody id="my_events_tbody"><tr><td colspan="4">Click the button above to load your registrations.</td></tr></tbody>
          </table>
        </div>
      </div>
      <div class="panel">
        <div class="section-header compact">
          <div>
            <h3>My Clubs</h3>
            <p class="hint">Clubs where you are already approved.</p>
          </div>
          <button onclick="loadMyClubs()">Load My Clubs</button>
        </div>
        <ul id="my_club_list" class="card-list"><li>Log in above, then load your approved clubs.</li></ul>
      </div>
    </div>
  </section>

  <section class="admin-only content-section" data-section-group="admin">
    <div class="section-header">
      <p class="eyebrow">Admin</p>
      <div>
        <h2>Admin Dashboard</h2>
        <div id="admin_status" class="section-status status" aria-live="polite"></div>
        <p>Approve clubs, monitor flags, and keep the platform tidy.</p>
      </div>
    </div>
    <div class="admin-grid">
      <div class="panel admin-panel">
        <div class="section-header compact">
          <div>
            <h3>All Clubs Overview</h3>
            <p class="hint">See every clubâ€™s status, members, and upcoming events.</p>
          </div>
          <button onclick="loadAdminClubsOverview()">Load All Clubs</button>
        </div>
        <div class="table-wrapper">
          <table class="admin-table">
            <thead>
              <tr><th>Club</th><th>Category</th><th>Status</th><th>Members</th><th>Pending</th><th>Upcoming</th><th>Action</th></tr>
            </thead>
            <tbody id="admin_club_overview_tbody">
              <tr><td colspan="7" class="empty-state">Load all clubs to review their details.</td></tr>
            </tbody>
          </table>
        </div>
        <div id="admin_club_overview_status" class="section-status status" aria-live="polite"></div>
      </div>
      <div class="panel admin-panel">
        <div class="section-header compact">
          <div>
            <h3>Pending Clubs</h3>
            <p class="hint">Review and approve new submissions.</p>
          </div>
          <button onclick="loadPendingClubs()">Load Pending Clubs</button>
        </div>
        <div class="table-wrapper">
          <table class="admin-table">
            <thead>
              <tr><th>Club</th><th>Description</th><th>Requester</th><th>Action</th></tr>
            </thead>
            <tbody id="pending_club_tbody">
              <tr><td colspan="4" class="empty-state">Load pending clubs to review submissions.</td></tr>
            </tbody>
          </table>
        </div>
        <div id="pending_club_status" class="section-status status" aria-live="polite"></div>
      </div>
      <div class="panel admin-panel">
        <div class="section-header compact">
          <div>
            <h3>Pending Leaders</h3>
            <p class="hint">Approve leader accounts before they manage clubs.</p>
          </div>
          <button onclick="loadPendingLeaders()">Load Pending Leaders</button>
        </div>
        <div class="table-wrapper">
          <table class="admin-table">
            <thead>
              <tr><th>User</th><th>Email</th><th>Action</th></tr>
            </thead>
            <tbody id="pending_leader_tbody">
              <tr><td colspan="3" class="empty-state">Load pending leaders to review requests.</td></tr>
            </tbody>
          </table>
        </div>
        <div id="pending_leader_status" class="section-status status" aria-live="polite"></div>
      </div>
      <div class="panel admin-panel">
        <div class="section-header compact">
          <div>
            <h3>Flagged Content</h3>
            <p class="hint">Resolve reports from across the app.</p>
          </div>
          <button onclick="loadFlags()">Load Flagged Content</button>
        </div>
        <div class="table-wrapper">
          <table class="admin-table">
            <thead>
              <tr><th>Type</th><th>Item</th><th>Reason</th><th>Reporter</th><th>Created</th><th>Action</th></tr>
            </thead>
            <tbody id="flagged_tbody">
              <tr><td colspan="6" class="empty-state">Load flagged content to review reports.</td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </section>

  </div>


  <script src="/js/api.js"></script>
  <script src="/js/state.js"></script>
  <script src="/js/events.js"></script>
  <script src="/js/clubs.js"></script>
  <script src="/js/admin.js"></script>
  <script src="/js/app.js"></script>
</body>
</html>
